var jdata = [{
	"url": "https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1598765491792&di=ae189b5e08464aa8b3e62203a7e57dff&imgtype=0&src=http%3A%2F%2Fimg2.tbcdn.cn%2Ftfscom%2Fi3%2F2285648739%2FTB2y9QJbEFWMKJjSZFvXXaenFXa_%2521%25212285648739.jpg"
}, {
	"url": "https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1598765491789&di=bccb48b13160c0a35f3e882bde2821e5&imgtype=0&src=http%3A%2F%2Fimg14.360buyimg.com%2Fn1%2Fs350x449_jfs%2Ft19531%2F234%2F1164575865%2F63681%2F781d4667%2F5abf2aa1N36152981.jpg%2521cc_350x449.jpg"
}, {
	"url": "https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=3875227776,898342295&fm=26&gp=0.jpg"
}, {
	"url": "https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1598769401545&di=95bb5a7824bace44e4eb6b23fc0de8f9&imgtype=0&src=http%3A%2F%2Fimg12.360buyimg.com%2Fn1%2Fs350x449_jfs%2Ft20695%2F272%2F1747202032%2F317779%2Fbfe01883%2F5b32f038N3a410c06.jpg%2521cc_350x449.jpg"
}, {
	"url": "https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1598765794988&di=f4ccf891a0100b8efce09bfaa74c5912&imgtype=0&src=http%3A%2F%2Fimg0.imgtn.bdimg.com%2Fit%2Fu%3D724220610%2C2481216560%26fm%3D214%26gp%3D0.jpg"
}, {
	"url": "https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=2228072526,1208274576&fm=26&gp=0.jpg"
}, {
	"url": "https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1598769401540&di=edcda7f533ac2ad81d18c56e428d3088&imgtype=0&src=http%3A%2F%2Fimg3.tbcdn.cn%2Ftfscom%2Fi1%2F2934683862%2FTB1GUgih.F7MKJjSZFLXXcMBVXa_%2521%25210-item_pic.jpg"
}];
var jjs = [{
	"id": "01",
	"url": "https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1598771668281&di=5b30ff43a6c371d4f75a04cf1579b2da&imgtype=0&src=http%3A%2F%2Fe.hiphotos.baidu.com%2Fbaike%2Fpic%2Fitem%2F6609c93d70cf3bc7733c32e0db00baa1cd112afa.jpg",
	"price": "不好等待机会，而要创造机会"
}, {
	"id": "02",
	"url": "https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=2645371614,2121792189&fm=26&gp=0.jpg",
	"price": "最可怕的敌人，就是没有坚强的信念"
}, {
	"id": "03",
	"url": "https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1598771668280&di=d28631c444664512d6e1ace2e4e19a1e&imgtype=0&src=http%3A%2F%2Fm.360buyimg.com%2Fn12%2Fjfs%2Ft1915%2F248%2F1331786663%2F624426%2F2785cb6a%2F569521d0ne04b5e68.jpg%2521q70.jpg",
	"price": "生命不在长而在于好，只要每一次尽力的演示，都值得鼓励与喝采"
}, {
	"id": "04",
	"url": "https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=1761533121,3979248545&fm=26&gp=0.jpg",
	"price": "时光就像一辆畜力车，它的速度取决于我们手中的鞭子。"
}, {
	"id": "05",
	"url": "https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=2840684390,254106146&fm=26&gp=0.jpg",
	"price": "梦想一旦被付诸行动，就会变得神圣。"
}, {
	"id": "06",
	"url": "https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=1666733135,195015488&fm=26&gp=0.jpg",
	"price": "一个人，要是不逼自己一把，根本不知道自己有多优秀。"
}, {
	"id": "07",
	"url": "https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=2228072526,1208274576&fm=26&gp=0.jpg",
	"price": "这条路，尽管洒满泪水，却不是一条废弃之路。"
}, {
	"id": "08",
	"url": "https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=4075998423,1184893379&fm=26&gp=0.jpg",
	"price": "志在山顶的人，不会贪念山腰的风景。"
}, {
	"id": "09",
	"url": "https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=1020835599,448724693&fm=26&gp=0.jpg",
	"price": "知识给人重量，成就给人光彩，大多数人只是看到了光彩，而不去称量重量"
}, {
	"id": "10",
	"url": "https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=2840684390,254106146&fm=26&gp=0.jpg",
	"price": "古之立大事者，不惟有超世之材，亦必有坚忍不拨之志。"
}, {
	"id": "11",
	"url": "https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=1057485127,1578504974&fm=26&gp=0.jpg",
	"price": "寄言燕雀莫相唣，自有云霄万里高。"
}, {
	"id": "12",
	"url": "https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=2840684390,254106146&fm=26&gp=0.jpg",
	"price": "成功不是做你喜欢做的事，而是做你应该做的事。"
}, {
	"id": "13",
	"url": "https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1598767439146&di=f976afe38f018e814135672ac166e663&imgtype=0&src=http%3A%2F%2Fimg2.tbcdn.cn%2Ftfscom%2Fi3%2F2285648739%2FTB2y9QJbEFWMKJjSZFvXXaenFXa_%2521%25212285648739.jpg",
	"price": "成功便是站起比倒下多一次。"
}, {
	"id": "14",
	"url": "https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=3340357837,2004532901&fm=26&gp=0.jpg",
	"price": "没人扶你的时候，自己站直，路还长，背影要美。"
}, {
	"id": "15",
	"url": "https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=2840684390,254106146&fm=26&gp=0.jpg",
	"price": "命运掌握在自己手里，命运的好坏由自己去创造。"
}, {
	"id": "16",
	"url": "https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=2257524752,726731452&fm=26&gp=0.jpg",
	"price": "世上最美的，莫过于从泪水中挣脱出来的那个微笑。"
}, {
	"id": "17",
	"url": "https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=1671953270,3491071536&fm=26&gp=0.jpg",
	"price": "世上没有绝望的处境，只有对处境绝望的人。"
}, {
	"id": "18",
	"url": "https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1954584500,4260003614&fm=26&gp=0.jpg",
	"price": "逆境磨练人、逆境是老师、逆境之苦可变甜。"
}, {
	"id": "19",
	"url": "https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=1840069822,36286476&fm=26&gp=0.jpg",
	"price": "生命不在长而在于好，只要每一次尽力的演示，都值得鼓励与喝采"
}];
var i=0;
var max=25;
function formatTime(date) {
  var year = date.getFullYear()
  var month = date.getMonth() + 1
  var day = date.getDate()

  var hour = date.getHours()
  var minute = date.getMinutes()
  var second = date.getSeconds()

 return [year, month, day].map(formatNumber).join('/') + ' ' + [hour, minute, second].map(formatNumber).join(':')
}

function formatNumber(n) {
  n = n.toString()
  return n[1] ? n : '0' + n
}

function getDate(c) {
  var indexp = Math.floor(Math.random() * 20) + 9;
  var index = Math.floor(Math.random() * 20);
  var that = c;
  wx.request({
    url: 'https://www.apiopen.top/meituApi', //仅为示例，并非真实的接口地址
    data: {
      page: indexp
    },
    header: {
      'content-type': 'application/json' // 默认值
    },
    success(res) {
      i=i+1;
      //console.log(res.data)
      var resdata = res.data.data[index].url;
      resdata = "/image/im1.png";
      // console.log(resdata)
      resdata = getdaa(resdata, i, jdata);
      that.setData({
        url: resdata
      })
    }
  })
  //定时器每隔6秒执行一次
  //var timerName =setTimeout(function () {
  //getDate(c);
  // }, 6000)
}
function getdaa(resdata,i,jdata){
  if (i > 10){
    var index = Math.floor(Math.random() * 20)-1;
    var arrindex = Math.floor(Math.random() * (jdata.length));
    resdata = jdata[arrindex].data[index].url;
    //console.log(jdata[arrindex])
  } 
  return resdata;
}

function getonearray(resdata, i, jdata) {
  if (i > max) {
    var index = Math.floor(Math.random() * 20)-1;
    var arrindex = Math.floor(Math.random() * (jdata.length));
    resdata = jdata[arrindex];
   // console.log(jdata[arrindex])
  }
  return resdata;
}
function getDateBanner(c,start,end) {
  var that = c;
 // var indexp = Math.floor(Math.random() * 20) + 9;
 // var index = Math.floor(Math.random() * 20);
 // wx.request({
  //  url: 'https://www.apiopen.top/meituApi', //仅为示例，并非真实的接口地址
   // data: {
   //   page: indexp
   // },
  //  header: {
    //  'content-type': 'application/json' // 默认值
 //   },
   // success(res) {
   //   var datare = res.data;
      //console.log(datare);
     // console.log("5555");
    //  datare = getonearray(datare, i, jdata);
   
     // for (var ii = 0; ii < datare.data.length; ii++) {
      //  var key = 'item[' + ii + '].url';
      //  var id = 'item[' + ii + '].id';
      //  var chat = 'item[' + ii + '].chat';
      //  var price = 'item[' + ii + '].price';
      //  var urla = datare.data[ii];
       // that.setData({
          // 这里使用键值对方式赋值
        //  [key]: urla.url,
          //[key]: "/image/im1.png",
         // [id]: urla.createdAt,
         // [price]: urla.createdAt,
        //  [chat]: urla.type
      //  })
    //  }
     
   // }
 // })
 for (var ii = start; ii <=end; ii++) {
    var  iii=ii-start;
    var key = 'item[' + iii + '].url';
    var id = 'item[' + iii + '].id';
    var chat = 'item[' + iii + '].chat';
    var price = 'item[' + iii + '].price';
    var urla = jjs[ii];
    that.setData({
      // 这里使用键值对方式赋值
      [key]: urla.url,
      [id]: urla.id,
      [price]: urla.price,
      [chat]: 'TEST'
    })
  }


}
function getIndex(){
  var indx=Math.floor(Math.random() * 20)%7;
  var curl=jdata[indx].url;
 // console.log(curl);
  return curl;
}
function getDateswiper(c) {
  var indexp = Math.floor(Math.random() * 20) + 9;
  var in1 = Math.floor(Math.random() * 20);
  //console.log("new" + in1);
  var in2 = Math.floor(Math.random() * 20);
 // console.log("new" + in2);
  var in3 = Math.floor(Math.random() * 20);
  //console.log("new" + in3);


  var v1 = 0, v2 = 1, v3 = 2;
  var that = c;
  wx.request({
    url: 'https://www.apiopen.top/meituApi', //仅为示例，并非真实的接口地址
    data: {
      page: indexp
    },
    header: {
      'content-type': 'application/json' // 默认值
    },
    success(res) {
      var datare = res.data;
      datare = getonearray(datare, i, jdata);
      //console.log(res.data);
      //console.log(datare);
      var resdata1 = datare.data[in1]
      var resdata2 = datare.data[in2]
      var resdata3 = datare.data[in3]
      
      changeItemInArray0(v1, c, resdata1);
      changeItemInArray0(v2, c, resdata2);
      changeItemInArray0(v3, c, resdata3);
     
    }
  })

}

function changeItemInArray0(index, c, data) {
  // 提前准备好对象
  var that = c;
  // 依旧是根据index获取数组中的对象
  var key = 'background[' + index + '].url'
  var id = 'background[' + index + '].id'
  that.setData({
    // 这里使用键值对方式赋值
   // [key]: date.url,
    [key]: data.url,
    [id]: "/image/im1.png",
    // dataimg: date.url
    dataimg: "/image/im1.png"
  })
}


function changeItemInArray(index, c, data) {
  // 提前准备好对象
  var that = c;
  // 依旧是根据index获取数组中的对象
  var key = 'background[' + index + '].url'
  var id = 'background[' + index + '].id'
  that.setData({
    // 这里使用键值对方式赋值
    [key]: data.url,
    //[key]: "/image/im1.png",
     [id]: "/image/im1.png",
    dataimg: data.url
    //dataimg: "/image/im1.png"
  })
}
module.exports = {
  formatTime: formatTime,
  getDate: getDate,
  getDateswiper: getDateswiper,
  changeItemInArray: changeItemInArray,
  getDateBanner: getDateBanner,
  getIndex: getIndex
}
